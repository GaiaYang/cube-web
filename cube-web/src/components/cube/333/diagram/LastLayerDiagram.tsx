import React, { memo, type SVGProps } from "react";
import { deepEqual } from "fast-equals";

import cn from "@/utils/cn";

import type { FaceletPosition, FaceletColor } from "@/types/cube/333";

export interface LastLayerDiagramProps extends SVGProps<SVGSVGElement> {
  size?: number;
  colorMap?: Partial<Record<FaceletPosition, FaceletColor>>;
}

/** 最後一層圖案 */
export default memo(function LastLayerDiagram({
  size,
  colorMap,
  ...props
}: LastLayerDiagramProps) {
  function _renderPath(item: PathItem) {
    return (
      <path
        {...item}
        key={item.id}
        vectorEffect="non-scaling-stroke"
        className={cn(
          "stroke-1 [stroke-dasharray:none]",
          "stroke-neutral-400",
          (function () {
            switch (colorMap?.[item.id]) {
              case "red":
                return "fill-red-400";
              case "orange":
                return "fill-orange-400";
              case "white":
                return "fill-white";
              case "yellow":
                return "fill-yellow-300";
              case "blue":
                return "fill-blue-400";
              case "green":
                return "fill-green-400";
              case "none":
              default:
                return "fill-gray-300 dark:fill-gray-500";
            }
          })(),
        )}
      />
    );
  }

  return (
    <svg width={size} height={size} {...props} viewBox="0 0 48 48">
      {paths.map(_renderPath)}
    </svg>
  );
}, deepEqual);

interface PathItem extends Pick<React.SVGProps<SVGPathElement>, "d"> {
  id: FaceletPosition;
}

const paths: PathItem[] = [
  {
    id: "TL",
    d: "m 6.2466019,6.2466019 v 2.7547533 5.5095058 2.754753 h 3.3844112 4.8798479 2.125095 c 0.34883,0 0.629658,-0.280828 0.629658,-0.629658 V 9.6310131 6.2466019 h -2.754753 z",
  },
  {
    id: "TC",
    d: "m 18.490495,6.2466019 v 8.2642591 c 0,1.526132 1.228621,2.754753 2.754753,2.754753 h 2.754753 2.754753 c 1.526132,0 2.754753,-1.228621 2.754753,-2.754753 V 11.756108 6.2466019 h -2.754753 z",
  },
  {
    id: "TR",
    d: "m 30.734388,6.2466019 v 3.3844112 4.8798479 2.125095 c 0,0.34883 0.280828,0.629658 0.629658,0.629658 h 2.125095 4.879848 3.384411 V 9.0013552 6.8762601 c 0,-0.3488304 -0.280827,-0.6296582 -0.629658,-0.6296582 h -2.125095 z",
  },
  {
    id: "CL",
    d: "m 6.2466019,18.490495 v 2.754753 5.509506 2.754753 h 5.5095061 2.754753 c 1.526132,0 2.754753,-1.228621 2.754753,-2.754753 v -2.754753 -2.754753 c 0,-1.526132 -1.228621,-2.754753 -2.754753,-2.754753 z",
  },
  {
    id: "CR",
    d: "m 33.489141,18.490495 c -1.526131,0 -2.754753,1.228621 -2.754753,2.754753 v 2.754753 2.754753 c 0,1.526132 1.228622,2.754753 2.754753,2.754753 h 2.754753 5.509506 v -8.264259 -2.125095 c 0,-0.34883 -0.280827,-0.629658 -0.629658,-0.629658 h -4.879848 z",
  },
  {
    id: "CC",
    d: "m 21.245248,18.490495 c -1.526132,0 -2.754753,1.228621 -2.754753,2.754753 v 2.754753 2.754753 c 0,1.526132 1.228621,2.754753 2.754753,2.754753 h 2.754753 2.754753 c 1.526132,0 2.754753,-1.228621 2.754753,-2.754753 v -2.754753 -2.754753 c 0,-1.526132 -1.228621,-2.754753 -2.754753,-2.754753 h -2.754753 z",
  },
  {
    id: "BL",
    d: "m 6.2466019,30.734388 v 2.754753 5.509506 2.754753 h 2.7547533 5.5095058 2.754753 v -8.264259 c 0,-1.526131 -1.228621,-2.754753 -2.754753,-2.754753 z",
  },

  {
    id: "BC",
    d: "m 21.245248,30.734388 c -1.526132,0 -2.754753,1.228622 -2.754753,2.754753 v 2.754753 5.509506 h 2.754753 5.509506 2.754753 v -8.264259 c 0,-1.526131 -1.228621,-2.754753 -2.754753,-2.754753 h -2.754753 z",
  },
  {
    id: "BR",
    d: "m 31.364046,30.734388 c -0.34883,0 -0.629658,0.280828 -0.629658,0.629658 v 7.004943 3.384411 h 2.754753 5.509506 2.754753 v -3.384411 -4.879848 -2.125095 c 0,-0.34883 -0.280827,-0.629658 -0.629658,-0.629658 h -2.754753 z",
  },
  {
    id: "S-TL",
    d: "m 6.876806,0.9999999 h 9.759696 c 0.348831,0 0.629658,0.2808274 0.629658,0.6296578 v 2.7634982 c 0,0.3488305 -0.280827,0.6296578 -0.629658,0.6296578 H 6.876806 c -0.3488303,0 -0.6296577,-0.2808273 -0.6296577,-0.6296578 V 1.6296577 c 0,-0.3488304 0.2808274,-0.6296578 0.6296577,-0.6296578 z",
  },
  {
    id: "S-TC",
    d: "m 19.120153,0.9999999 h 9.759696 c 0.348831,0 0.629658,0.2808274 0.629658,0.6296578 v 2.7634982 c 0,0.3488305 -0.280827,0.6296578 -0.629658,0.6296578 h -9.759696 c -0.34883,0 -0.629658,-0.2808273 -0.629658,-0.6296578 V 1.6296577 c 0,-0.3488304 0.280828,-0.6296578 0.629658,-0.6296578 z",
  },
  {
    id: "S-TR",
    d: "m 31.363499,0.9999999 h 9.759696 c 0.348831,0 0.629658,0.2808274 0.629658,0.6296578 v 2.7634982 c 0,0.3488305 -0.280827,0.6296578 -0.629658,0.6296578 h -9.759696 c -0.348831,0 -0.629658,-0.2808273 -0.629658,-0.6296578 V 1.6296577 c 0,-0.3488304 0.280827,-0.6296578 0.629658,-0.6296578 z",
  },
  {
    id: "S-BL",
    d: "m 6.876806,42.977186 h 9.759696 c 0.348831,0 0.629658,0.280828 0.629658,0.629658 v 2.763498 C 17.26616,46.719173 16.985333,47 16.636502,47 H 6.876806 C 6.5279757,47 6.2471483,46.719173 6.2471483,46.370342 v -2.763498 c 0,-0.34883 0.2808274,-0.629658 0.6296577,-0.629658 z",
  },
  {
    id: "S-BC",
    d: "m 19.120153,42.977186 h 9.759696 c 0.348831,0 0.629658,0.280828 0.629658,0.629658 v 2.763498 C 29.509507,46.719173 29.22868,47 28.879849,47 h -9.759696 c -0.34883,0 -0.629658,-0.280827 -0.629658,-0.629658 v -2.763498 c 0,-0.34883 0.280828,-0.629658 0.629658,-0.629658 z",
  },
  {
    id: "S-BR",
    d: "m 31.363499,42.977186 h 9.759696 c 0.348831,0 0.629658,0.280828 0.629658,0.629658 v 2.763498 C 41.752853,46.719173 41.472026,47 41.123195,47 h -9.759696 c -0.348831,0 -0.629658,-0.280827 -0.629658,-0.629658 v -2.763498 c 0,-0.34883 0.280827,-0.629658 0.629658,-0.629658 z",
  },
  {
    id: "S-RT",
    d: "m 43.606844,6.2471483 h 2.763498 C 46.719173,6.2471483 47,6.5279757 47,6.876806 v 9.759696 c 0,0.348831 -0.280827,0.629658 -0.629658,0.629658 h -2.763498 c -0.34883,0 -0.629658,-0.280827 -0.629658,-0.629658 V 6.876806 c 0,-0.3488303 0.280828,-0.6296577 0.629658,-0.6296577 z",
  },
  {
    id: "S-RC",
    d: "m 43.606844,18.490495 h 2.763498 C 46.719173,18.490495 47,18.771323 47,19.120153 v 9.759696 c 0,0.348831 -0.280827,0.629658 -0.629658,0.629658 h -2.763498 c -0.34883,0 -0.629658,-0.280827 -0.629658,-0.629658 v -9.759696 c 0,-0.34883 0.280828,-0.629658 0.629658,-0.629658 z",
  },
  {
    id: "S-RB",
    d: "m 43.606844,30.733841 h 2.763498 C 46.719173,30.733841 47,31.014668 47,31.363499 v 9.759696 c 0,0.348831 -0.280827,0.629658 -0.629658,0.629658 h -2.763498 c -0.34883,0 -0.629658,-0.280827 -0.629658,-0.629658 v -9.759696 c 0,-0.348831 0.280828,-0.629658 0.629658,-0.629658 z",
  },
  {
    id: "S-LT",
    d: "m 1.6296577,6.2471483 h 2.7634982 c 0.3488305,0 0.6296578,0.2808274 0.6296578,0.6296577 v 9.759696 c 0,0.348831 -0.2808273,0.629658 -0.6296578,0.629658 H 1.6296577 c -0.3488304,0 -0.6296578,-0.280827 -0.6296578,-0.629658 V 6.876806 c 0,-0.3488303 0.2808274,-0.6296577 0.6296578,-0.6296577 z",
  },
  {
    id: "S-LC",
    d: "m 1.6296577,18.490495 h 2.7634982 c 0.3488305,0 0.6296578,0.280828 0.6296578,0.629658 v 9.759696 c 0,0.348831 -0.2808273,0.629658 -0.6296578,0.629658 H 1.6296577 c -0.3488304,0 -0.6296578,-0.280827 -0.6296578,-0.629658 v -9.759696 c 0,-0.34883 0.2808274,-0.629658 0.6296578,-0.629658 z",
  },
  {
    id: "S-LB",
    d: "m 1.6296577,30.733841 h 2.7634982 c 0.3488305,0 0.6296578,0.280827 0.6296578,0.629658 v 9.759696 c 0,0.348831 -0.2808273,0.629658 -0.6296578,0.629658 H 1.6296577 c -0.3488304,0 -0.6296578,-0.280827 -0.6296578,-0.629658 v -9.759696 c 0,-0.348831 0.2808274,-0.629658 0.6296578,-0.629658 z",
  },
];
